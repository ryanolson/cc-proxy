# Route requests through a Dynamo inference frontend
#
# Usage:
#   1. Expose the Dynamo frontend (e.g. via kubectl proxy or port-forward):
#      kubectl proxy --port=8001
#
#   2. Start this proxy (--target-url and --model are CLI args now):
#      ./target/release/cc-proxy --config cc-proxy.dynamo.toml \
#        --target-url http://localhost:8001/api/v1/namespaces/default/services/my-frontend:8000/proxy \
#        --model my-model-name
#
#   3. Point your client at the proxy:
#      ANTHROPIC_BASE_URL=http://localhost:3080 ANTHROPIC_API_KEY=dummy <client>

default_mode = "target"

[server]
listen_address = "0.0.0.0:3080"

[target]
# url set via --target-url (not stored here)
timeout_secs = 300
max_concurrent = 50

[passthrough]
# Used only in `compare` and `anthropic-only` modes (requires --allow-anthropic-only)
url = "https://api.anthropic.com"
passthrough_auth = true
timeout_secs = 300

[tracing]
service_name = "cc-proxy-dynamo"
# otlp_endpoint = "http://localhost:4317"  # optional, omit to disable
log_level = "info,cc_proxy=debug"
